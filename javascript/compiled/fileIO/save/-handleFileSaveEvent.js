import NodeElements from "../../~nodeElements";
import createFile from "./-createFile";
import { lastFilename } from "../load/-handleFileInputEvent";
export default function handleFileSaveEvent(event) {
    let downloadElement = document.createElement('a');
    let fileString = createFile();
    downloadElement.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(fileString));
    if (lastFilename !== undefined) {
        downloadElement.setAttribute('download', lastFilename.split('.').shift() + ".layout");
    }
    else {
        downloadElement.setAttribute('download', 'filename.layout');
    }
    downloadElement.style.display = 'none';
    document.body.appendChild(downloadElement);
    downloadElement.click();
    document.body.removeChild(downloadElement);
    $(window).one("blur", () => {
        $(window).one("focus", () => {
            NodeElements.fileStatusText.innerText = "File Saved Successfully";
        });
    });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLWhhbmRsZUZpbGVTYXZlRXZlbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi90eXBlc2NyaXB0L2ZpbGVJTy9zYXZlLy1oYW5kbGVGaWxlU2F2ZUV2ZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sWUFBWSxNQUFNLHFCQUFxQixDQUFDO0FBQy9DLE9BQU8sVUFBVSxNQUFNLGVBQWUsQ0FBQztBQUN2QyxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sK0JBQStCLENBQUM7QUFDN0QsTUFBTSxDQUFDLE9BQU8sVUFBVSxtQkFBbUIsQ0FBQyxLQUFZO0lBRXJELElBQUksZUFBZSxHQUFzQixRQUFRLENBQUMsYUFBYSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBR3JFLElBQUksVUFBVSxHQUFHLFVBQVUsRUFBRSxDQUFDO0lBQzlCLGVBQWUsQ0FBQyxZQUFZLENBQUMsTUFBTSxFQUFFLGdDQUFnQyxHQUFHLGtCQUFrQixDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUM7SUFHeEcsSUFBSSxZQUFZLEtBQUssU0FBUyxFQUFFO1FBQzdCLGVBQWUsQ0FBQyxZQUFZLENBQUMsVUFBVSxFQUFFLFlBQVksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsS0FBSyxFQUFFLEdBQUcsU0FBUyxDQUFDLENBQUM7S0FDeEY7U0FBTTtRQUNKLGVBQWUsQ0FBQyxZQUFZLENBQUMsVUFBVSxFQUFFLGlCQUFpQixDQUFDLENBQUM7S0FDOUQ7SUFJRCxlQUFlLENBQUMsS0FBSyxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUM7SUFFdkMsUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsZUFBZSxDQUFDLENBQUM7SUFHM0MsZUFBZSxDQUFDLEtBQUssRUFBRSxDQUFDO0lBR3hCLFFBQVEsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLGVBQWUsQ0FBQyxDQUFDO0lBSTNDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLEdBQUcsRUFBRTtRQUN4QixDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxHQUFHLEVBQUU7WUFDekIsWUFBWSxDQUFDLGNBQWMsQ0FBQyxTQUFTLEdBQUcseUJBQXlCLENBQUM7UUFDckUsQ0FBQyxDQUFDLENBQUM7SUFDTixDQUFDLENBQUMsQ0FBQztBQUNOLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTm9kZUVsZW1lbnRzIGZyb20gXCIuLi8uLi9+bm9kZUVsZW1lbnRzXCI7XHJcbmltcG9ydCBjcmVhdGVGaWxlIGZyb20gXCIuLy1jcmVhdGVGaWxlXCI7XHJcbmltcG9ydCB7IGxhc3RGaWxlbmFtZSB9IGZyb20gXCIuLi9sb2FkLy1oYW5kbGVGaWxlSW5wdXRFdmVudFwiO1xyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBoYW5kbGVGaWxlU2F2ZUV2ZW50KGV2ZW50OiBFdmVudCkge1xyXG4gICAvLyBDcmVhdGUgYW4gdGVtcG9yYXJ5IGVsZW1lbnQgdG8gZG93bmxvYWRcclxuICAgbGV0IGRvd25sb2FkRWxlbWVudDogSFRNTEFuY2hvckVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XHJcblxyXG4gICAvLyBTcGVjaWZ5IGVuY29kaW5nIGFuZCBkZWZpbmUgY29udGVudFxyXG4gICBsZXQgZmlsZVN0cmluZyA9IGNyZWF0ZUZpbGUoKTtcclxuICAgZG93bmxvYWRFbGVtZW50LnNldEF0dHJpYnV0ZSgnaHJlZicsICdkYXRhOnRleHQvcGxhaW47Y2hhcnNldD11dGYtOCwnICsgZW5jb2RlVVJJQ29tcG9uZW50KGZpbGVTdHJpbmcpKTtcclxuXHJcbiAgIC8vIEdpdmUgdGhlIGZpbGUgYSBuYW1lXHJcbiAgIGlmIChsYXN0RmlsZW5hbWUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICBkb3dubG9hZEVsZW1lbnQuc2V0QXR0cmlidXRlKCdkb3dubG9hZCcsIGxhc3RGaWxlbmFtZS5zcGxpdCgnLicpLnNoaWZ0KCkgKyBcIi5sYXlvdXRcIik7XHJcbiAgIH0gZWxzZSB7XHJcbiAgICAgIGRvd25sb2FkRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2Rvd25sb2FkJywgJ2ZpbGVuYW1lLmxheW91dCcpO1xyXG4gICB9XHJcblxyXG5cclxuICAgLy8gRG9uJ3QgZGlzcGxheSB0aGUgZWxlbWVudFxyXG4gICBkb3dubG9hZEVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuXHJcbiAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZG93bmxvYWRFbGVtZW50KTtcclxuXHJcbiAgIC8vIENsaWNrIHRoZSBlbGVtZW50IG9uIGJlaGFsZiBvZiB0aGUgdXNlclxyXG4gICBkb3dubG9hZEVsZW1lbnQuY2xpY2soKTtcclxuXHJcbiAgIC8vIFJlbW92ZSB0aGUgZWxlbWVudFxyXG4gICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGRvd25sb2FkRWxlbWVudCk7XHJcblxyXG4gICAvLyBDYW4ndCBkZXRlY3QgaWYgY2FuY2VsIHByZXNzZWQgYnV0IGNhbiBkZXRlY3QgdGhhdCBzYXZlIHdpbmRvdyBpcyBvcGVuZWQgYW5kIGNsb3NlZC5cclxuICAgLy8gVGhpcyBtZWNoYW5pc20gaXNuJ3QgcGVyZmVjdCwgYnV0IGl0IGRvZXNuJ3QgbmVlZCB0byBiZS5cclxuICAgJCh3aW5kb3cpLm9uZShcImJsdXJcIiwgKCkgPT4ge1xyXG4gICAgICAkKHdpbmRvdykub25lKFwiZm9jdXNcIiwgKCkgPT4ge1xyXG4gICAgICAgICBOb2RlRWxlbWVudHMuZmlsZVN0YXR1c1RleHQuaW5uZXJUZXh0ID0gXCJGaWxlIFNhdmVkIFN1Y2Nlc3NmdWxseVwiO1xyXG4gICAgICB9KTtcclxuICAgfSk7XHJcbn0iXX0=